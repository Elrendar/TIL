# 2022-08-14 WIL

[목록으로 돌아가기](/README.md)

미니 프로젝트를 시작했다.

---

## 스프링 심화 주차 (08-08~08-11)

스프링에 대한 공부야 앞으로도 계속 해야 할 일이고, 아마 취업을 한 이후에도 계속 될 거라 생각한다.

그러니 이번 주가 스프링 공부의 마지막은 아니지만, 어쨌든 캠프 일정상 스프링의 기초를 닦는 마지막 기간이긴 했다.

팀원들과 함께 구현해야 할 기능을 분배해서 작은 REST API 프로젝트를 만들었다.

* JWT기반의 회원가입, 로그인
* 글, 댓글, 대댓글 작성
* 좋아요 등록, 취소
* AWS S3 기반 파일 업로드 및 삭제
* 마이페이지에서 작성글 필터링
* 스케줄러로 일정 시간마다 S3 버킷 내부의 안 쓰이는 파일 삭제

이런 기능들이 담긴 프로젝트였다.

작업 분배는 사다리를 탔는데, 나는 좋아요 기능을 맡아서 작업했다.

운이 좋게도 아주 쉬운 기능이었기에 금방 끝낼 수 있었다.

덕분에 개인 공부 시간이 좀 주어져서, 지난 주에 끝내지 못한 강의 수강, 복습 등을 할 수 있었다.

## 미니 프로젝트 (08-12~08-14)

드디어 1주차 이후 처음으로 프론트 멤버와 협업을 하게 되었다.

여전히 서비스 기획 부분은 너무 복잡했다.

기획 자체가 어려웠던 게 아니라, 명확하게 역할과 책임이 부여된 것이 아니다보니 의견을 조율하는 것이 어려웠다.

방금 든 생각인데, 분명 1주차 WIL에도 비슷한 얘기를 했던 것 같다.

첫날은 하루종일 회의에 매달렸다.

* 어떤 서비스를 할지
* 어떤 기능이 들어가야 할지

이 2가지를 논의하는 데만 정말 많은 시간이 걸렸다. 그럼에도 불구하고 구체적이고 명확한 기획이 나온 것은 아니라서, API 명세서를 작성한 뒤에도 많은 수정이 필요했다.

이런 프로젝트를 할 때마다 팀에 기획자가 왜 필요한지, 책임자가 왜 필요한지 절실히 느끼게 된다.

다행히 이번 주는 새로운 기능을 공부해서 추가하는 것이 우선 목표가 아니라, 기존에 배운 것들을 잘 구현해서 프론트와 연결해보는 것이 중요한 주간이다.

그래서 학습적인 측면에서는 조금 여유가 있을 거 같아 다행이다.

---

## Weakly Keyword: CORS

### 개요

CORS는 Cross-Origin Resource Sharing의 줄임말로, 서로 다른 origin 간의 리소스 공유를 의미한다.

### origin이란?

origin은 URI에서 `scheme`, `hostname`, 그리고 `port`의 조합을 의미한다.

URI:

```http
https://developer.mozilla.org/ko/docs/Web/HTTP/Headers/Origin
```

Origin:

```http
https://developer.mozilla.org
```

같은 origin이라는 말은, 위 3가지 요소가 전부 일치한다는 것을 의미한다.

### CORS는 왜 필요한가?

CORS를 이해하기 위해서는 먼저 SOP(Same-Origin Policy)에 대해 이해해야 한다.

SOP는 이름 그대로 같은 origin끼리만 리소스를 공유할 수 있게 하는 보안 정책이다.

만약 이에 제한을 두지 않고 무분별하게 풀어둘 경우, 보안에 심각한 허점이 생긴다.

하지만 그렇다고 싹 다 막아버리는 것 또한 현실적으로 어렵다.

그렇기에 CORS 정책을 지킨 리소스 요청에 대해 예외를 허용하기로 한 것이다.

### CORS가 동작하는 방식

웹 클라이언트 앱에서 다른 origin의 리소스를 요청할 때는 HTTP를 사용하여 요청을 보내는데, 이 때 헤더에는 `Origin`이라는 필드가 담겨 있다.

```http
Origin: https://developer.mozilla.org
```

이런 식이다.

이후 서버에서 응답을 보낼 때, 응답 헤더에는 `Access-Control-Allow-Origin` 이라는 값이 들어있다. 여기에는 리소스 접근이 허용된 출처가 담겨있다.

서버가 보낸 응답을 받은 브라우저는 자신이 보냈던 요청의 `Origin`과, 받은 응답의 `Access-Control-Allow-Origin`을 비교해 유효한 응답인지를 판별한다.

### CORS 정책 위반 문제를 해결하는 방법

가장 대표적인 방법은 정석대로 서버에서 응답을 보낼 때, `Access-Control-Allow-Origin` 헤더에 알맞은 값을 세팅해서 보내는 것이다.

***여기에 `*`값을 세팅하면 모든 origin을 허용하겠다는 의미이므로 심각한 보안 이슈가 발생할 수 있다.***

그러니 가급적 `Access-Control-Allow-Origin: https://developer.mozilla.org` 와 같이 origin을 명시하는 것이 좋다.

---

## 마무리

어느덧 이노베이션 캠프를 시작한지 5주가 지났다.

지난 주에는 너무 어렵다는 생각을 했었는데, 이번 주는 또 좀 여유롭게 보냈다.

사실 공부하는 내용은 큰 차이가 없었는데 말이다.

결국 뭐든 처음 배우는 것은 어렵고, 익숙해지면 할만해지는 거 같다.

덕분에 앞으로는 어려운 일이 생겨도 마음을 좀 편하게 먹을 수 있을 것 같다.

하다 보면 익숙해지겠지, 라고 생각하며...
