# 2022-10-02 WIL

[목록으로 돌아가기](/README.md)

실전 프로젝트 다섯째 주를 보냈다. 내일이 사실상 마지막 날이다.

---

## 실전 프로젝트 (09-26~10-02)

프로젝트가 진짜 마무리 단계에 접어들었다. 이번 주엔 여러 버그 수정과 함께 이미지 인코딩 기능을 주로 작업했다.

### 이미지 인코딩

MVP에는 이미지 리사이징을 통한 썸네일 기능만이 들어있었다. 메인 페이지에서 원본 이미지를 로딩하지 않고, 축소된 썸네일을 로딩하는 것만으로도 속도 면에서 효과를 볼 수 있었다.

하지만 MVP 작업이 끝나고 추가기능을 고민할 때, 이 부분을 조금 더 개선하고 싶다는 생각이 들었다. WebP 포맷을 사용하면 화질 손실이 거의 없이 용량을 크게 감소시킬 수 있다는 사실을 알고 있었기 때문이다.

#### 1.1 시행착오

* webp가 흔하게 사용되는 포맷이 아니다보니 정보를 찾는데 어려움이 좀 있었다. 처음엔 우연히 발견한 `JDeli`라는 라이브러리를 사용해서 webp 인코딩을 구현했다.

  몇 번의 삽질 끝에 성공은 했지만, 결과물에 반전이 있었다. `JDeli`는 상용 라이브러리였고, 내가 사용한 체험판에는 워터마크와 화질제한이 있었던 것이다.

  덕분에 시간은 날렸지만 중요한 교훈을 얻었다. 라이브러리를 사용하기 전에는 항상 라이센스를 꼼꼼히 체크해야 한다는 교훈을...

* 하지만 소득이 아주 없었던 건 아니었다. `JDeli` 홈페이지의 사용설명서에는 자바 표준 입출력 라이브러리인 `JavaI/O`에 대한 이야기가 있었다.

  아마 "우리 라이브러리를 사용하면 내장 라이브러리보다 이만큼 편합니다!"를 강조하고 싶었던 것 같다. 어쨌든 덕분에 나는 `JavaI/O`를 사용해도 webp의 입출력이 가능하다는 정보를 얻었고, 이에 대해 좀 더 알아봐야겠다는 생각이 들었다.

* 프로그래밍 언어의 입출력이 으레 그렇듯, 자바 역시 마찬가지로 어렵고 복잡했다. 나 역시 `JavaI/O`에 대해 A부터 Z까지 다 공부하기보다는 당장 webp 인코딩을 구현하는 것이 우선이었다.

  알아보니 `JavaI/O`는 기본적으로 지원하는 이미지 포맷들이 있었다. 흔히들 사용하는 `png`, `jpg` 등이다. 그 외의 포맷들은 기본 지원하지는 않지만, 플러그인을 설치하면 지원이 가능하도록 만들어져 있었다. 모든 것들 갖추는 대신 확장성을 제공한 것이었다.

  webp를 지원하는 플러그인 역시 존재했고, 구글링을 통해 가장 검색결과