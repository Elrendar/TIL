# 2022-10-09 WIL

[목록으로 돌아가기](/README.md)

실전 프로젝트를 끝마쳤다. 그동안 느낀 점들을 정리해 보았다.

---

## 실전 프로젝트 회고록 (08-26~10-09)

### 1. 기획

- #### *기획의 어려움*

  - 내가 참여했던 프로젝트들이 실제 상용 서비스를 제작하는 프로젝트는 아니었지만, 기간과 인력이 정해진 상황에서 최선의 결과를 뽑아내야 한다는 점에선 비슷하다고 봐도 될 것 같다.
  
    그리고 이를 위해서는 팀이 나아가야 할 올바른 방향을 제시하는 것은 물론이고, 어디까지 갈 수 있는지, 어떻게 가야하는지도 고려해야 한다. 아직 아무 것도 없는 프로젝트 기획 단계에서부터...

    기획의 어려움은 프로젝트를 할 때마다 절감하게 된다. 이래서 기획자라는 직업이 있는 거구나, 라는 생각을 하게 만든다.

- #### *욕심*

  - 이번 프로젝트는 초기 기획에서 크게 벗어나지 않고 무난히 마무리되었다. 하지만 늘 그랬듯이, 조금 더 욕심을 냈으면 좋았겠다는 아쉬움이 남는다.

    사실 솔직히 말하면, 이건 욕심의 문제가 아니라 그냥 내가 게을렀기 때문이다. 프로젝트 도중에라도 얼마든지 방향을 바꿀 기회가 있었기 때문이다. 조금 더 어려운 길로 바꿀 기회가. 그걸 선택하지 않은 건 순전히 내 잘못이다.

### 2. 개발

- #### *개발 과정의 장애물*

  - 솔직히 말하면 이번 프로젝트에서 가장 어려웠던 부분은 서비스 로직이 아니었다. 오히려 `EC2`를 비롯한 `AWS` 서비스들, `GitHub`와 `GitHub Actions` 등을 활용하는 `CI/CD` 구현 및 관리가 더 어려웠다.

    물론 단순한 서비스였기 때문이기도 하고, 익숙함의 차이도 있었다. `CI/CD`라는 개념은 들어서 알고 있었지만, 직접 그 프로세스를 프로젝트에 적용해보는 것은 처음이었다.

  - 처음에는 `GitHub`만 잘 사용해도 `CI`는 된 거 아닌가? 라고 가볍게 생각했었다. 하지만 후에 실제로 `GitHub Actions`를 통해 간단한 빌드 테스트를 수행하게 되었을 때, 내가 얼마나 큰 착각을 하고 있는지 깨달았다.

    단지 PR을 생성한 브랜치의 빌드 테스트를 수행했을 뿐인데, 메인 브랜치에 병합하고 빌드가 안 되는 문제의 대부분이 사라졌다. 물론 이 이후에도 메인 브랜치에서 오류가 발생한 적이 한 두 번이 아니지만, 그 횟수가 절반은 줄었다고 해도 과언이 아니다.

  - 그 다음 `AWS Code Deploy`를 활용해 `CD`까지 구현했을 때, 메인 브랜치에 push하는 것만으로도 자동으로 빌드 테스트를 수행하고, 빌드된 `jar` 파일이 가동 중인 ec2 인스턴스에서 실행되는 것을 보고 전율을 느꼈다. 당장은 작은 수고를 덜어주는 정도지만, push 횟수가 쌓이고 쌓일수록 절약되는 시간은 어마어마하게 늘어날 것이 분명했다.

- #### *한 걸음 더 나아갔다면*

  - 위에서 `CI/CD`에 대해 그렇게 극찬을 해놓고, 정작 나는 가장 중요한 테스트 코드를 작성하지 않았다. 우리 프로젝트의 코드는 말 그대로 빌드'만' 되서 배포되고 있었던 것이다. 즉, 실행은 되는데 ***기능이 제대로 수행되는지는 아무도 보장해주지 않는*** 상태였다!

  - 나는 이것이 얼마나 끔찍한 일인지, 프로젝트 후반부에 가서야 깨달았다. 맨 처음 api가 몇 개 없고, 기능도 단순하던 프로젝트는 `PostMan`으로 api 호출 몇 번 하는 것만으로도 테스트가 가능했다. 그래서 테스트 코드의 필요성을 느끼지 못했다.

    하지만 프로젝트가 조금씩 커지고 api 갯수가 20개를 넘어갔을 때쯤, 나는 뭔가 크게 잘못되었다는 것을 직감하기 시작했다. 

    새로운 기능추가를 할 때마다 무슨 버그가 발생할지 몰라서 모든 api를 테스트 해보고, 그러고도 발견하지 못하는 새로운 문제가 생기기 시작했던 것이다. 그것도 새 기능을 개발할 때마다 매 번!

  - 사실 그러면서도 나는 그러한 상황이, 프로젝트가 커짐에 따라 발생하는 자연스러운 일이라 생각했다. 언젠가 나 포함 팀원 모두가 더 깨끗하게 코드를 작성할 수 있게 되면 이런 문제는 줄어들 것이라고 생각했다.

    ***하지만 우리에겐 그저 적당한 테스트 코드가 하나 필요했을 뿐이다...***

### 3. 협업

- #### *왜 이렇게 짰지?*

  - 다행히 우리 팀원들은 다들 배려할 줄 아는 사람들이었고, 양보와 설득이 뭔지 아는 사람들이었다. 하지만 그럼에도 협업 과정이 순탄하지만은 않았다. 인격과 실력은 별개의 문제이기 때문이다.
  
    코드를 보다 보면, '왜 이렇게 짰을까?'하는 의문이 들 때가 많았다. 물론 어제의 내가 작성한 코드를 볼 때도 그랬다. 하지만 내 코드는 스스로 수정하면 그만이지만, 남의 코드는 그럴 수가 없다는 게 문제였다.

    - 먼저 상대에게 질문한다. **최대한 친절하게, 공격적이지 않은 톤으로, 상대가 불쾌하지 않게.**
      - "무슨 의도로 이렇게 짜셨나요?"
    - 그 다음 다시 질문한다.
      - "이렇게 이렇게, 저렇게 바꾸면 이러저러해서 더 좋아질 것 같은데, 어떻게 생각하세요?"

  - 이런 설득의 과정을 거친 끝에야 코드를 수정할 수 있었다. 물론 이 모든 게 서로 피곤한 일이기 때문에, 꼭 필요할 것 같은 경우가 아니면 코드 수정 요구는 하지 않고 그저 질문으로만 끝낸다. 내가 잘못 이해한 것일 수도 있기 때문이다.
  - 차라리 누구 한 명이 실력이 압도적으로 뛰어나면 오히려 편할텐데, 비슷비슷하니까 더 불편했다. *내가 틀렸을 가능성도 높기 때문이다.*

- #### *Pull Request*

  - 우리 팀은 `GitHub-Flow`라는 브랜치 전략을 사용했고, 이에 따라 `Issue`와 `PR`을 적극 활용했다. 그리고 매번 `PR`이 올라올 때마다 다른 팀원 1명 이상의 승인이 있어야 메인 브랜치에 병합할 수 있도록 제한을 두었다.
  - 이는 나쁘지 않은 방법 같았고, 실제로 적용 결과 프로젝트를 관리하는 데 많은 도움이 되었다. 다만 문제점도 있었다.

    1. 팀원의 리뷰나 승인이 늦어질수록, 개발 속도가 지연된다.
    2. 승인 과정을 소홀히 할 경우 메인 브랜치, 즉 **배포 중인 서비스**에 문제가 생길 수 있다.

  - 처음엔 팀원 2명의 승인, 즉 전체 팀원의 승인을 받아야 하도록 설정했으나, 문제 a, 즉 승인이 늦어지는 문제 때문에 1명으로 줄이게 됐다. 현실적으로 팀원 모두가 `PR`이 올라올 때마다 하던 작업을 전부 그만 두고 승인 작업에만 매달릴 수가 없었기 때문이다.

    프로젝트 막바지에는 아예 승인이 없어도 리포지토리의 관리자였던 나의 관리자 권한으로 병합이 가능하게 바꾸기도 했다.

  - 그리고 당연하게도, 이렇게 승인과정을 간소화할수록 b.의 문제가 빈번히 발생하기 시작했다. 바쁘다는 핑계로 리뷰를 소홀히하고, 급하다는 핑계로 승인절차를 건너뛰고, 그러니 당연히 결과물에 문제가 생길 수밖에 없었다.
  - 이 때 필요한 것이 바로 테스트 코드였으나, 앞서 말했듯 우리는 그 중요성을 **문제가 터지고 나서야 깨달았다.** 그리고 그것을 깨달은 시점에는 이미 눈앞의 버그를 해결하기에 바빠 테스트 코드를 작성할 시간이 없었다.

### 4. 발표

- #### *왜 그렇게 했지?*

  - 5주간 힘들게 코드를 짜고, 마지막 1주차는 절반 이상을 최종발표 준비에 투자했다. 발표용 PPT를 제작하고, 서비스 아키텍쳐 구조도를 제작하고, 시연영상을 만들고, 발표 스크립트를 준비했다. 이 과정도 순탄치 않았다.
  - 포트폴리오 용으로 만든 서비스 및 프로젝트 소개에서 가장 중요한 부분은 결국 ***무엇을, 어떻게, 왜 그렇게 했는가***이다. 가령 스프링 부트에는 `WAS` 역할을 하는 `Apache Tomcat`이 내장되어 있는데, 왜 `Nginx`를 추가로 사용했는가? 와 같은 질문에 답할 수 있어야 한다는 뜻이다.

    그런데 솔직히... 당장 자바와 스프링 부트부터 그냥 배워서 쓰게 된 건데 저런 걸 일일히 사용한 명확한 근거가 어디 있을까? 그저 구글링 해보니 나오니까 쓴 거지.

    하지만 당연하게도, 이런 내용을 발표에 집어 넣거나 면접 시 대답으로 사용했다가 대참사가 벌어질 게 뻔하므로 어떻게든 조치를 취해야 했다.

    - 1. 선 사용, 후 이유 추가
    - 2. 이유 없는 기술 사용은 내용에서 제거

  - 이 중 우리의 선택은 후자였다. 몇 가지 이유가 있었다.

    - 1. 이유를 붙이기도 민망할 만큼, 의미가 없는 사용이거나
    - 2. 만약 예상치 못한 추가 질문이 들어올 수 있다는 리스크

  - 이런 점들을 고려했다. 차라리 추후에 더 공부해서 제대로 사용해보고 넣을지언정, 발표에 넣는 건 시기상조라는 생각이 들었다. 결국 우리 발표에선 `Nginx`에 대한 설명이 빠졌다. 그에 대해 잘 설명할 자신이 없었기 때문이다.

### 5. 마무리

- #### *이제는 이력서를 준비할 시간*

  - 우여곡절 끝에 프로젝트가 끝나고, 이제는 이력서와 면접을 준비할 때가 되었다. 하지만 이 프로젝트를 이대로 방치할 생각은 아니다.
  - 먼저 계속 강조했던, 미처 작성하지 못한 테스트 코드를 완성하고, 추가 기능을 고민해볼 생각이다. 그 다음엔 성능 측정 등, 바쁘다는 핑계로, 실은 게을러서 하지 않았던 일들을 해보려고 한다. 프론트엔드 팀원들도 프로젝트 개선에 긍정적인 반응을 보였다.

    과연 취업하기 전까지 이 프로젝트가 얼마나 더 개선될까?
